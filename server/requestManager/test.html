<html>

<body>

  <script>
    var get_services = function () {

      const Http = new XMLHttpRequest();
  
      var conditions = {
        date:  {min:'2020-10-15', max:'2020-10-25'},
        type:  "food",
        lat:   {max:47.453, min:50.342},
        longi: {max: 130.456, min: 122.908}
      };
      
        //Http.open("GET", '/service?date-minn=2020-10-15&lat-min=45.786&lat-max=67.89&longi-min=122.3434');
      Http.open("GET", '/service?owner=jon&date-min=2020-10-16&date-max=2020-10-25&type=food&lat-min=45.786&lat-max=67.89&longi-min=122.3434&longi-max=125.2323');
      Http.send();

      console.log("Getting services: GET /service");
    }

    var add_service = function () {

      const Http = new XMLHttpRequest();

      var body = { name: 'A service',
                   dow: 'Monday',
                   date: '2020-10-17',
                   time: '12:57:33',
                   lat:   49.56911,
                   longi: 123.456,
                   owner: 'Brendon',
                   type:  'food',
                   description: 'This is a description'
                 };
  
      Http.open("POST", '/service');
      Http.setRequestHeader('Content-Type', 'application/json');
      
      Http.send(JSON.stringify(body));
      //Http.send(body);
      console.log("Adding service: POST /service");
    }


    var update_service = function () {

      const Http = new XMLHttpRequest();

      var originbody = { name: 'A service',
                   dow: 'Monday',
                   date: '2020-10-17',
                   time: '12:57:33',
                   lat:   49.56911,
                   longi: 123.456,
                   owner: 'Brendon',
                   type:  'food',
                   description: 'This is a description'
                 };

      var updatebody = { name: 'A update service',
                   dow: 'Tuesday',
                   date: '2020-10-17',
                   time: '12:57:33',
                   lat:   49.56911,
                   longi: 123.456,
                   owner: 'Brendon',
                   type:  'study',
                   description: 'This is a update description'
                 };
      // you can change the id here based on your database table
      Http.open("PUT", '/service?id=2');
      Http.setRequestHeader('Content-Type', 'application/json');
      
      Http.send(JSON.stringify(updatebody));
      console.log("update service: PUT /service");
    }



    var delete_service = function () {

      const Http = new XMLHttpRequest();
      
      Http.open("DELETE", '/service?id=1');
      Http.send();

      console.log("Getting services: GET /service");
    }


    var get_new_messages = function () {

       const Http = new XMLHttpRequest();

      Http.open("GET", '/chat?user1=me&user2=you&newest=2020-10-22%2012:22:34');
      Http.send();

      console.log("Getting messages: GET /chat");
    }

    var add_message = function () {

      const Http = new XMLHttpRequest();

      var message = {sender: "c",
                   recipient: "b",
                   timestamp: "2020-10-31 11:23:34",
                   content: "Hello!"};

      Http.open("POST", '/chat');
      Http.setRequestHeader('Content-Type', 'application/json');
      Http.send(JSON.stringify(message));

      console.log("Adding message: POST /chat");
    }




     var add_user = function () {

      const Http = new XMLHttpRequest();

      var body = {
              username: "brendon",
              password: "brendon20000522",
              deviceToken:"this is a device",
              servicesUsed: [1,2,3,4,5],
              servicesPosted: [8,9]
                 };
  
      Http.open("POST", '/user');
      Http.setRequestHeader('Content-Type', 'application/json');
      
      Http.send(JSON.stringify(body));
      console.log("Adding user: POST /service");
    }


     var delete_user = function () {

       const Http = new XMLHttpRequest();
      
      Http.open("DELETE", '/user?userID=3');
      Http.send();

      console.log("Getting user: GET /user");
    }


    var update_user = function () {

      const Http = new XMLHttpRequest();

      var updatebody = { 
              username: "brendon",
              password: "newpassword",
              deviceToken:"this is a device",
              servicesUsed: [1,2,3,4,5],
              servicesPosted: [8,9]
                 };
      // you can change the id here based on your database table
      Http.open("PUT", '/user?userID=2');
      Http.setRequestHeader('Content-Type', 'application/json');
      
      Http.send(JSON.stringify(updatebody));
      console.log("update user: PUT /user");
    }

  
  </script>

  <button onclick='get_services()'> Get Services </button>
  <button onclick='add_service()'> Add Service </button>
  <button onclick='update_service()'> Update Services </button>
  <button onclick='delete_service()'> Delete Service </button>
  <button onclick='get_new_messages()'> Get Messages </button>
  <button onclick='add_message()'> Add Message </button>
  <button onclick='add_user()'> Add User </button>
  <button onclick='delete_user()'> Delete User </button>
  <button onclick='update_user()'> Update User </button>


</body>
</html>
